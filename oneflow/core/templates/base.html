<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>1flow – {% block title %}{% endblock title %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    {# See http://1flow.io/fr/lire/524db8f2a246390954b5e73e/ #}
    <meta name="msmobile-web-app-capable" content="yes" />
    <link type="text/plain" rel="author" href="http://1flow.io/humans.txt" />

    <link rel="stylesheet" media="screen"
        href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" />
    <link rel="stylesheet"
        href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" />

    <!--[if IE 7]>
      {% compressed_css 'font-awesome-ie7' %}
    <![endif]-->
    {# HTML5 shim, for IE6-8 support of HTML5 elements #}

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!--[if gte IE 9]>
      <style type="text/css">
        .gradient {
           filter: none;
        }
      </style>
    <![endif]-->

    <script type="text/javascript"
        src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

    <script type="text/javascript">
      var scrollForHash = function() { scrollBy(0, -70) };

      window.addEventListener("hashchange", scrollForHash);

      function loadScrollForHash() { if (window.location.hash) scrollForHash(); }
    </script>

    {% block extrajs_header %}{% endblock extrajs_header %}
  </head>
  <body id="{% block body_id %}{% endblock body_id %}" {% block body_data %}{% endblock body_data %} onload="loadScrollForHash()">
    {% block body %}{% endblock body %}

    {% block extrajs_footer %}{% endblock extrajs_footer %}

    {% comment %}
        Caching this block is not easy.
        It would depend on user_echo_page,
        would require a dedicated template
        tag which would probably anihilate
        the cache gain.
    {% endcomment %}

    {# HOW UGLY IS THIS… When calling a function would be so simple… #}
    {% captureas user_echo_page %}{% reverse_active 'home' %}{% reverse_active 'source_selector' %}{% reverse_active 'profile' %}{% reverse_active 'help' %}{% endcaptureas %}
    {% if not debug and user_echo_page %}
      {% include 'snippets/userecho.html' %}
      {% if user.is_anonymous or not user.is_superuser %}
        {% include 'snippets/google-analytics.html' %}
      {% endif %}
    {% endif %}

  </body>
</html>
