{% extends 'base.html' %}

{% block title %}{% trans 'Home' %}{% endblock title %}

{% block extrajs_header %}
  <script type="text/javascript">
    var url_root = '{{ request.META.SCRIPT_NAME }}';
  </script>
{% endblock extrajs_header %}

{% block body %}
{% include 'ember/main.html' %}
{% include 'ember/views/index.html' %}
{% include 'ember/views/teams.html' %}
{% include 'ember/views/subscriptions.html' %}
{% include 'ember/views/discovery.html' %}
{% include 'ember/views/profile.html' %}
{% include 'ember/views/help.html' %}
{% endblock body %}

{% block extrajs_footer %}

    {% jquery_js %}
    {% compressed_js 'temp_handlebars_rc4' %}
    {% ember_js %}
    {% ember_data_js %}
    {% tastypie_adapter_js %}

    {% comment %}
    restore {% emberpie_js %}
    when
        http://discuss.emberjs.com/t/ember-rc-5-is-not-working-properly-with-handlebars-1-0-0/1391
    is resolved
    {% endcomment %}

    {% compressed_js 'bootstrap' %}
    {% compressed_js 'showdown' %}
    {% compressed_js 'moment' %}
    {% compressed_js 'utils' %}
    {% compressed_js 'core' %}

    {# This must stay here (in the template) to get the server-side language. #}
    <script type="text/javascript">
        moment.lang('{{ LANGUAGE_CODE }}');
    </script>

    {% if has_google %}
        <script type="text/javascript">
            function update_gri_status() {
                $.get("{% url 'google_reader_import_status' %}", function(data){
                    $('#google-reader-import-status').html(data);
                });
            }

            update_gri_status();

            setInterval(update_gri_status, 2000);
        </script>
    {% endif %}

    {% csrf_token %}
{% endblock extrajs_footer %}
