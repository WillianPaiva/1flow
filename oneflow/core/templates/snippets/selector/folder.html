<div class="folder-wrapper clearfix level-{{ level }}">
    <div id="{{ folder.id }}" class="folder {% if folder.subscriptions or folder.children %}has_content{% endif %}">
        <div class="name-wrapper">
            <span class="pull-right css-hover-muted"><a href="{% url 'edit_folder' folder=folder.id %}"
                data-toggle="modal" class="manage"><i class="icon-cog"></i></a></span>
            <span class="name">
                {{ folder.name }}
                {# {% if debug %}<span class="muted">#{{forloop.counter}}</span>{% endif %} #}
            </span>
        </div>

        {% if folder.subscriptions %}
            <div class="subscriptions">
                {% for subscription in folder.subscriptions %}
                    {% include "snippets/selector/subscription.html" %}
                {% endfor %}
            </div>
            <div class="clearfix"></div>

        {% else %}
            {% if not folder.children %}
                <div class="no-subscription-wrapper">
                    <div class="no-subscription">
                        {% blocktrans with folder_name=folder.name %}No subscription in “{{folder_name}}”.{% endblocktrans %}
                    </div>
                </div>
            {% endif %}
        {% endif %}

        {% if folder.children %}
            <div class="children">
                {# Why this "with template_name …": http://stackoverflow.com/a/11644588/654755 #}
                {% for child in folder.children_by_name %}
                    {% with template_name="snippets/selector/folder.html" folder=child level=level|add:'1' %}
                        {% include template_name %}
                    {% endwith %}
                {% endfor %}
            </div>
        {% endif %}

    </div>
</div>
