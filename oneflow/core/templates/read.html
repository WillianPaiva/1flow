{% extends 'home.html' %}

{% block title %}{% trans 'Read' %}{% endblock title %}

{% block application_content %}

    <div class="row-fluid">
        <div class="span12">
            <div class="btn-toolbar pull-right">

                {% with home_style=preferences.home.style %}
                    <div class="btn-group" data-toggle="buttons-checkbox"
                        data-preference="home.style"
                        data-preference-reload-url="{{ request.path }}">
                        <button class="btn preference {% if home_style == 'RL' %}active{% endif %}"
                            data-preference-value="RL"
                            title=""><i class="icon-list"></i></button>
                        <button class="btn preference {% if home_style == 'TL' %}active{% endif %}"
                            data-preference-value="TL"
                            title=""><i class="icon-th-large"></i></button>
                    </div>
                {% endwith %}
            </div>

            <h1>{% blocktrans %}
                Read
                <small>(<span id="reads_count">{{ reads_count }}</span>)</small>
            {% endblocktrans %} </h1>

        </div>
    </div>

    {% if reads %}
        {% if mongodb_user.preferences.home.style == 'RL' %}
            <ul class="media-list">
                {% include 'snippets/read/read-list-page.html' %}
            </ul>

        {% else %}
                {% include 'snippets/read/read-tiles-page.html' %}

        {% endif %}

    {% else %}
        <div class="hero-unit">
            <h2>{% trans "Nothing to read yet. Buy a book?" %}</h2>
        </div>

    {% endif %}

{% endblock application_content %}

{% block extrajs_footer %}
    {% compressed_js 'endless-pagination' %}
    <script type="text/javascript">
        $.endlessPaginate({
        {% if config.READ_INFINITE_AUTOSCROLL_ENABLED %}
            paginateOnScroll: true,
            paginateOnScrollMargin: 500
        {% endif %}
        });
    </script>
{% endblock extrajs_footer %}
